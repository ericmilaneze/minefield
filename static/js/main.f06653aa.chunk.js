(this.webpackJsonpminefield=this.webpackJsonpminefield||[]).push([[0],[,,,,,,,,,function(e,t,s){e.exports=s(17)},,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),r=s(6),o=s.n(r),a=(s(14),s(4)),u=s(8),l=s(7),h=s(2),c=s(3),m={medium:{name:"Medium",rows:20,columns:10,bombs:35,bisque:!0},easy:{name:"Easy",rows:12,columns:6,bombs:10,bisque:!0},hard:{name:"Hard",rows:28,columns:13,bombs:75,bisque:!0}},d=function(){function e(t,s){Object(h.a)(this,e),this.minefield=t,this.rowIndex=s,this.squares=[]}return Object(c.a)(e,[{key:"isEven",value:function(){return this.rowIndex%2===0}},{key:"addSquare",value:function(e,t){e.setRow(this,t),this.squares.push(e)}},{key:"getSquareFromColumn",value:function(e){return this.squares.find((function(t){return t.address.squareIndexInRow===e}))}},{key:"getRowAbove",value:function(){var e=this;return this.rowIndex<=0?null:this.minefield.rows.find((function(t){return t.rowIndex===e.rowIndex-1}))}},{key:"getRowBelow",value:function(){var e=this;return this.rowIndex>=this.minefield.rows.length-1?null:this.minefield.rows.find((function(t){return t.rowIndex===e.rowIndex+1}))}}]),e}(),f=function(){function e(t){Object(h.a)(this,e),this.row=t,this.hasBomb=!1,this.showingResult=!1,this.hasFlag=!1}return Object(c.a)(e,[{key:"setRow",value:function(e,t){this.row=e,this.address={rowIndex:e.rowIndex,squareIndexInRow:e.squares.length,squareIndexInMinefield:t}}},{key:"getNeighbors",value:function(){var e=this.row,t=this.row.getRowAbove(),s=this.row.getRowBelow(),n=this.address.squareIndexInRow,i=n-1,r=n+1,o=[];return t&&(o.push(t.getSquareFromColumn(i)),o.push(t.getSquareFromColumn(n)),o.push(t.getSquareFromColumn(r))),o.push(e.getSquareFromColumn(i)),o.push(e.getSquareFromColumn(r)),s&&(o.push(s.getSquareFromColumn(i)),o.push(s.getSquareFromColumn(n)),o.push(s.getSquareFromColumn(r))),o.filter((function(e){return e}))}},{key:"getNeighborsWithBombs",value:function(){return this.getNeighbors().filter((function(e){return e.hasBomb}))}},{key:"getNumberOfNeighborsWithBombs",value:function(){return this.getNeighborsWithBombs().length}},{key:"show",value:function(){e.hasFlag||this.showingResult||(this.showingResult=!0)}},{key:"isEven",value:function(){return this.address.squareIndexInMinefield%2===0}},{key:"toggleFlag",value:function(){this.hasFlag=!this.hasFlag&&!this.showingResult&&!this.row.minefield.isFinished}},{key:"putBomb",value:function(){this.hasBomb=!0}}]),e}(),g=function(){function e(t){Object(h.a)(this,e),this.level=t,this.rows=[],this.squares=[],this.squaresWithBombs=[],this.isFinished=!1,this.lose=!1,this.win=!1,this.hasStarted=!1,this.qtyFlagsMissing=t.bombs,this.qtyFieldsToExplore=0}return Object(c.a)(e,[{key:"shouldPaintAsEven",value:function(e){var t=e.isEven();return this.level.columns%2===0&&!e.row.isEven()?!t:t}},{key:"explodeSquaresAround",value:function(e){var t=this;e.getNeighbors().forEach((function(e){t.show(e)}))}},{key:"show",value:function(e){this.isFinished||e.hasFlag||e.showingResult||(this.hasStarted||(this._distributeBombs(e),this.hasStarted=!0),e.show(),e.hasBomb?(this.isFinished=!0,this.lose=!0):(this.qtyFieldsToExplore--,0===this.qtyFieldsToExplore&&(this.isFinished=!0,this.win=!0)),0===e.getNumberOfNeighborsWithBombs()&&this.explodeSquaresAround(e))}},{key:"toggleFlag",value:function(e){e.showingResult||this.isFinished||(e.toggleFlag(),e.hasFlag?this.qtyFlagsMissing--:this.qtyFlagsMissing++)}},{key:"_distributeBombs",value:function(e){for(var t=0;t<this.level.bombs;){var s=Math.floor(Math.random()*this.squares.length),n=this.squares[s];this.level.bisque&&this._isNeighborOrSelf(n,e)||(n.hasBomb||(n.putBomb(),this.squaresWithBombs.push(n),t++,this.qtyFieldsToExplore--))}}},{key:"_isNeighborOrSelf",value:function(e,t){if(!t)return!1;if(e===t)return!0;for(var s=t.getNeighbors(),n=0;n<s.length;n++)if(e===s[n])return!0;return!1}},{key:"_createRow",value:function(e){var t=new d(this,e);return this.rows.push(t),t}},{key:"_createSquare",value:function(e){var t=new f(e);return e.addSquare(t,this.squares.length),this.squares.push(t),this.qtyFieldsToExplore++,t}}],[{key:"createMinefield",value:function(t){for(var s=new e(m[t.toLowerCase()]),n=0;n<s.level.rows;n++)for(var i=s._createRow(n),r=0;r<s.level.columns;r++)s._createSquare(i);return s}}]),e}();s(15);function v(){var e=Object(n.useState)({}),t=Object(a.a)(e,2),s=t[0],r=t[1],o=Object(n.useState)(0),h=Object(a.a)(o,2),c=h[0],d=h[1],f=Object(n.useState)(m[Object.keys(m)[0]].name),v=Object(a.a)(f,2),w=v[0],b=v[1];return Object(n.useEffect)((function(){var e=g.createMinefield(w);r(e)}),[w]),i.a.createElement("section",{className:"campo-minado"},i.a.createElement("div",{className:"config"},s.level&&i.a.createElement("div",{className:"row"},i.a.createElement("div",null,"Level: ",s.level.name),i.a.createElement("div",null,"Rows: ",s.level.rows),i.a.createElement("div",null,"Columns: ",s.level.columns),i.a.createElement("div",null,"Bombs: ",s.level.bombs)),i.a.createElement("div",{className:"row"},i.a.createElement("div",null,"Flags: ",s.qtyFlagsMissing),i.a.createElement("div",null,"Fields: ",s.qtyFieldsToExplore)),s.hasStarted&&i.a.createElement("button",{className:"row",onClick:function(){return function(){var e=g.createMinefield(w);r(e),d(c+1)}()}},"Restart"),i.a.createElement("select",{className:"row",onChange:function(e){return function(e){b(e)}(e.target.value)}},Object.keys(m).map((function(e){return i.a.createElement("option",{value:e,key:e},m[e].name)}))),i.a.createElement("div",{className:"row result"},s.win&&"You win!",s.lose&&"You lose!")),i.a.createElement("div",{className:"main"},s.rows&&s.rows.map((function(e){return i.a.createElement("div",{key:e.rowIndex,className:"square-row"},e.squares.map((function(e){return i.a.createElement("div",{key:e.address.squareIndexInMinefield,className:"\n                                    square \n                                    ".concat(s.shouldPaintAsEven(e)?"even":"odd","\n                                    ").concat(e.showingResult?"showing":"not-showing","\n                                "),onClick:function(){return function(e){s.show(e),r(s),d(c+1)}(e)},onContextMenu:function(t){return function(e,t){e.preventDefault(),s.toggleFlag(t),r(s),d(c+1)}(t,e)}},e.showingResult&&!e.hasBomb&&0!==e.getNumberOfNeighborsWithBombs()&&e.getNumberOfNeighborsWithBombs(),e.showingResult&&e.hasBomb&&i.a.createElement(l.a,null),e.hasFlag&&i.a.createElement(u.a,null))})))}))))}s(16);var w=function(){return i.a.createElement("section",{className:"main-section"},i.a.createElement("h1",null,"Minefield"),i.a.createElement(v,null))};o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.f06653aa.chunk.js.map
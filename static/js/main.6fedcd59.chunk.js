(this.webpackJsonpminefield=this.webpackJsonpminefield||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),r=n(7),a=n.n(r),o=(n(14),n(4)),u=n(5),l=n(8),h=n(2),c=n(3),m={medium:{name:"Medium",rows:20,columns:10,bombs:35,bisque:!0},easy:{name:"Easy",rows:12,columns:6,bombs:10,bisque:!0},hard:{name:"Hard",rows:28,columns:13,bombs:75,bisque:!0}},f=function(){function e(t,n){Object(h.a)(this,e),this.minefield=t,this.rowIndex=n,this.squares=[]}return Object(c.a)(e,[{key:"isEven",value:function(){return this.rowIndex%2===0}},{key:"addSquare",value:function(e,t){e.setRow(this,t),this.squares.push(e)}},{key:"getSquareFromColumn",value:function(e){return this.squares.find((function(t){return t.address.squareIndexInRow===e}))}},{key:"getRowAbove",value:function(){var e=this;return this.rowIndex<=0?null:this.minefield.rows.find((function(t){return t.rowIndex===e.rowIndex-1}))}},{key:"getRowBelow",value:function(){var e=this;return this.rowIndex>=this.minefield.rows.length-1?null:this.minefield.rows.find((function(t){return t.rowIndex===e.rowIndex+1}))}}]),e}(),d=function(){function e(t){Object(h.a)(this,e),this.row=t,this.hasBomb=!1,this.showingResult=!1,this.hasFlag=!1}return Object(c.a)(e,[{key:"setRow",value:function(e,t){this.row=e,this.address={rowIndex:e.rowIndex,squareIndexInRow:e.squares.length,squareIndexInMinefield:t}}},{key:"getNeighbors",value:function(){var e=this.row,t=this.row.getRowAbove(),n=this.row.getRowBelow(),s=this.address.squareIndexInRow,i=s-1,r=s+1,a=[];return t&&(a.push(t.getSquareFromColumn(i)),a.push(t.getSquareFromColumn(s)),a.push(t.getSquareFromColumn(r))),a.push(e.getSquareFromColumn(i)),a.push(e.getSquareFromColumn(r)),n&&(a.push(n.getSquareFromColumn(i)),a.push(n.getSquareFromColumn(s)),a.push(n.getSquareFromColumn(r))),a.filter((function(e){return e}))}},{key:"getNeighborsWithBombs",value:function(){return this.getNeighbors().filter((function(e){return e.hasBomb}))}},{key:"getNumberOfNeighborsWithBombs",value:function(){return this.getNeighborsWithBombs().length}},{key:"show",value:function(){e.hasFlag||this.showingResult||(this.showingResult=!0)}},{key:"isEven",value:function(){return this.address.squareIndexInMinefield%2===0}},{key:"toggleFlag",value:function(){this.hasFlag=!this.hasFlag&&!this.showingResult&&!this.row.minefield.isFinished}},{key:"putBomb",value:function(){this.hasBomb=!0}}]),e}(),g=function(){function e(t){Object(h.a)(this,e),this.level=t,this.rows=[],this.squares=[],this.squaresWithBombs=[],this.isFinished=!1,this.lose=!1,this.win=!1,this.hasStarted=!1,this.qtyFlagsMissing=t.bombs,this.qtyFieldsToExplore=0}return Object(c.a)(e,[{key:"shouldPaintAsEven",value:function(e){var t=e.isEven();return this.level.columns%2===0&&!e.row.isEven()?!t:t}},{key:"explodeSquaresAround",value:function(e){var t=this;e.getNeighbors().forEach((function(e){t.show(e)}))}},{key:"show",value:function(e){this.isFinished||e.hasFlag||e.showingResult||(this.hasStarted||(this._distributeBombs(e),this.hasStarted=!0),e.show(),e.hasBomb?(this.isFinished=!0,this.lose=!0):(this.qtyFieldsToExplore--,0===this.qtyFieldsToExplore&&(this.isFinished=!0,this.win=!0)),0===e.getNumberOfNeighborsWithBombs()&&this.explodeSquaresAround(e))}},{key:"toggleFlag",value:function(e){e.showingResult||this.isFinished||(e.toggleFlag(),e.hasFlag?this.qtyFlagsMissing--:this.qtyFlagsMissing++)}},{key:"_distributeBombs",value:function(e){for(var t=0;t<this.level.bombs;){var n=Math.floor(Math.random()*this.squares.length),s=this.squares[n];this.level.bisque&&this._isNeighborOrSelf(s,e)||(s.hasBomb||(s.putBomb(),this.squaresWithBombs.push(s),t++,this.qtyFieldsToExplore--))}}},{key:"_isNeighborOrSelf",value:function(e,t){if(!t)return!1;if(e===t)return!0;for(var n=t.getNeighbors(),s=0;s<n.length;s++)if(e===n[s])return!0;return!1}},{key:"_createRow",value:function(e){var t=new f(this,e);return this.rows.push(t),t}},{key:"_createSquare",value:function(e){var t=new d(e);return e.addSquare(t,this.squares.length),this.squares.push(t),this.qtyFieldsToExplore++,t}}],[{key:"createMinefield",value:function(t){for(var n=new e(m[t.toLowerCase()]),s=0;s<n.level.rows;s++)for(var i=n._createRow(s),r=0;r<n.level.columns;r++)n._createSquare(i);return n}}]),e}();n(15);function b(){var e=Object(s.useState)({}),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(0),h=Object(o.a)(a,2),c=h[0],f=h[1],d=Object(s.useState)(m[Object.keys(m)[0]].name),b=Object(o.a)(d,2),w=b[0],v=b[1];return Object(s.useEffect)((function(){var e=g.createMinefield(w);r(e)}),[w]),i.a.createElement("section",{className:"campo-minado"},i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"config"},i.a.createElement("div",null,i.a.createElement("div",{className:"flag"},i.a.createElement(u.a,null)," ",n.qtyFlagsMissing),i.a.createElement("select",{onChange:function(e){return function(e){v(e)}(e.target.value)}},Object.keys(m).map((function(e){return i.a.createElement("option",{value:e,key:e},m[e].name)})))),n.hasStarted&&i.a.createElement("button",{className:"\n                                restart\n                                ".concat(n.win?"win":"","\n                                ").concat(n.lose?"lose":""),onClick:function(){return function(){var e=g.createMinefield(w);r(e),f(c+1)}()}},"Restart")),i.a.createElement("div",{className:"main"},n.rows&&n.rows.map((function(e){return i.a.createElement("div",{key:e.rowIndex,className:"square-row"},e.squares.map((function(e){return i.a.createElement("div",{key:e.address.squareIndexInMinefield,className:"\n                                        square \n                                        ".concat(n.shouldPaintAsEven(e)?"even":"odd","\n                                        ").concat(e.showingResult?"showing":"not-showing","\n                                        ").concat(w,"\n                                    "),onClick:function(){return function(e){n.show(e),r(n),f(c+1)}(e)},onContextMenu:function(t){return function(e,t){e.preventDefault(),n.toggleFlag(t),r(n),f(c+1)}(t,e)}},e.showingResult&&!e.hasBomb&&0!==e.getNumberOfNeighborsWithBombs()&&e.getNumberOfNeighborsWithBombs(),e.showingResult&&e.hasBomb&&i.a.createElement(l.a,null),e.hasFlag&&i.a.createElement(u.a,null))})))})))))}n(16);var w=function(){return i.a.createElement("section",{className:"main-section"},i.a.createElement(b,null))};a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.6fedcd59.chunk.js.map